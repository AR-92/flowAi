<div id="sidebarpage" bis_skin_checked="1" class="">
    <!-- Mini Sidebar - Always visible -->
    <div
        hx-get="./src/components/sideBar/miniSidebar.html"
        hx-trigger="load"
        hx-swap="outerHTML"
    ></div>

    <!-- Larger Sidebar - Slides in/out -->
    <div
        id="sidebar"
        class="fixed left-[50px] top-0 h-full w-[270px] border-r border-[#1a1b1c] bg-black transform transition-all duration-200 ease-in-out z-[9998] flex flex-col translate-x-0"
        bis_skin_checked="1"
    >
        <!-- Sidebar Header with Combined Controls -->
        <div class="border-b border-[#1a1b1c]" bis_skin_checked="1">
            <div class="flex items-center gap-3 p-3" bis_skin_checked="1">
                <!-- Search Input -->
                <div class="relative flex-1" bis_skin_checked="1">
                    <input
                        type="text"
                        placeholder="Search ..."
                        class="w-full px-3 h-8 bg-[#141414] rounded-md text-sm text-white placeholder-gray-500 border border-[#1a1b1c] focus:border-[#3a3b3c] focus:outline-none transition-colors"
                    />
                    <svg
                        class="absolute right-2 top-[8px] h-4 w-4 text-gray-500 pointer-events-none"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.3-4.3"></path>
                    </svg>
                </div>

                <!-- Close Button -->
                <button
                    class="text-gray-400 hover:text-white rounded-md hover:bg-[#1a1b1c] transition-colors"
                    _="on click
                 add .-translate-x-full to #sidebar
                 remove .translate-x-0 from #sidebar"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <path d="M18 6 6 18"></path>
                        <path d="m6 6 12 12"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Collapsible Sidebar items Section -->
        <div class="flex-1 overflow-y-auto" bis_skin_checked="1">
            <div
                id="collapsibleContainer"
                class="flex flex-col gap-2 p-2"
                bis_skin_checked="1"
            >
                <!-- Existing collapsibles will be here -->
            </div>
        </div>

        <!-- Bottom Section -->
        <div
            class="flex justify-center gap-2 p-2 border-t border-[#1a1b1c]"
            bis_skin_checked="1"
        >
            <!-- Save Button -->
            <button
                class="text-gray-400 hover:text-white p-1.5 rounded-md hover:bg-[#1a1b1c] transition-colors"
                onclick="saveSidebar()"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <path
                        d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
                    ></path>
                    <polyline points="17 21 17 13 7 13 7 21"></polyline>
                    <polyline points="7 3 7 8 15 8"></polyline>
                </svg>
            </button>
            <button
                class="flex items-center justify-center gap-2 w-full px-4 h-9 hover:bg-blue-500/20 rounded-md text-sm text-white font-medium transition-colors"
                _="on click
           remove .hidden from #customCategoryModal
           then
           call addClearIconButton() then add .flex to #customCategoryModal"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <path d="M12 5v14M5 12h14"></path>
                </svg>
                New Category Item
            </button>

            <!-- Refresh Button -->
            <button
                class="text-gray-400 hover:text-white p-1.5 rounded-md hover:bg-[#1a1b1c] transition-colors"
                hx-get="/src/components/sideBar/sideBar.html"
                hx-target="#sidebarpage"
                hx-swap="outerHTML"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <path d="M21 2v6h-6"></path>
                    <path d="M3 12a9 9 0 0 1 15-6.7L21 8"></path>
                    <path d="M3 22v-6h6"></path>
                    <path d="M21 12a9 9 0 0 1-15 6.7L3 16"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Category Modal -->
    <div
        id="customCategoryModal"
        class="fixed inset-0 bg-black/20 bg-opacity-50 items-center justify-center z-[10000] hidden"
        data-editing-category-id=""
        bis_skin_checked="1"
        data-parent-container=""
    >
        <div
            class="bg-black border border-[#1a1b1c] rounded-lg p-4 w-[500px] space-y-4"
            bis_skin_checked="1"
        >
            <div class="flex items-center justify-between" bis_skin_checked="1">
                <h3 class="text-white text-lg">Category</h3>
                <button
                    onclick="document.querySelector('#customCategoryModal').classList.add('hidden');document.querySelector('#customCategoryModal').classList.remove('flex')"
                    class="text-gray-400 hover:text-white"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path d="M18 6 6 18"></path>
                        <path d="m6 6 12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="space-y-4" bis_skin_checked="1">
                <!-- Icon Selector -->
                <div bis_skin_checked="1">
                    <label class="text-sm text-gray-400">Select Icon</label>
                    <div class="relative mt-1" bis_skin_checked="1">
                        <div class="relative" bis_skin_checked="1">
                            <div class="flex items-center" bis_skin_checked="1">
                                <!-- Selected Icon Container -->
                                <span
                                    id="selectedIcon"
                                    class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"
                                ></span>

                                <!-- Search Input -->
                                <input
                                    type="text"
                                    id="iconSearch"
                                    placeholder="Search icons..."
                                    class="w-full pl-10 pr-3 py-2 bg-black border border-[#1a1b1c] rounded-md text-sm text-white placeholder-gray-500 focus:border-[#3a3b3c] focus:outline-none"
                                    _="on input call searchIcons(my.value)"
                                    data-selected-icon=""
                                /><button
                                    class="p-1 hover:bg-red-950 rounded-md text-red-500 ml-2 transition-opacity"
                                    title="Clear Icon"
                                >
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="14"
                                        height="14"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    >
                                        <path d="M18 6 6 18"></path>
                                        <path d="m6 6 12 12"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Icons Grid -->
                        <div
                            id="iconsGrid"
                            class="absolute w-full mt-1 bg-black border border-[#1a1b1c] rounded-md max-h-[200px] overflow-y-auto hidden"
                            bis_skin_checked="1"
                        >
                            <div
                                class="p-2 grid grid-cols-6 gap-2"
                                bis_skin_checked="1"
                            ></div>
                        </div>
                    </div>
                </div>

                <!-- Category Name -->
                <div bis_skin_checked="1">
                    <label class="text-sm text-gray-400">Category Name</label>
                    <input
                        type="text"
                        class="w-full mt-1 px-3 py-2 bg-black border border-[#1a1b1c] rounded-md focus:outline-none focus:border-blue-500 text-white"
                        placeholder="Enter category name"
                    />
                </div>

                <!-- Final Node Checkbox -->
                <div class="flex items-center gap-2" bis_skin_checked="1">
                    <input
                        type="checkbox"
                        id="finalNodeCheckbox"
                        class="w-4 h-4 rounded border-[#1a1b1c] bg-black text-blue-500 focus:ring-0 focus:ring-offset-0"
                    />
                    <label for="finalNodeCheckbox" class="text-sm text-gray-400"
                        >This is a final node (cannot have children)</label
                    >
                </div>
            </div>

            <div class="flex justify-end gap-2" bis_skin_checked="1">
                <button
                    onclick="document.querySelector('#customCategoryModal').classList.add('hidden');document.querySelector('#customCategoryModal').classList.remove('flex')"
                    class="px-4 py-2 text-sm text-gray-400 hover:text-white border border-[#1a1b1c] rounded-md hover:bg-[#1a1b1c]"
                >
                    Cancel
                </button>
                <button
                    class="px-4 py-2 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600"
                    onclick="createCategory()"
                >
                    Create Category
                </button>
            </div>
        </div>
    </div>

    <script src="./src/components/sideBar/sideBarFunctions.js"></script>
    <script src="./src/components/sideBar/categoryFunctions.js"></script>
</div>
